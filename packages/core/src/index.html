<!-- Used in Docusaurus demo component -->
<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Go UI demo</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="/build/go-ui.css" />
    <script type="module" src="/build/go-ui.esm.js"></script>
    <script nomodule src="/build/go-ui.js"></script>
  </head>
  <body>
    <header class="container text-end">
      <go-dark-mode id="themer"></go-dark-mode>
      <go-switch id="switcher" label="Dark Mode"></go-switch>

      <script>
        const themer = document.getElementById('themer');
        const switcher = document.getElementById('switcher');
        themer.addEventListener('themechange', (e) => {
          switcher.setAttribute('checked', e.detail.theme === 'dark');
        });
        switcher.addEventListener('change', (e) => {
          themer.setTheme(e.target.checked ? 'dark' : 'light');
        });
      </script>
    </header>

    <!-- keep this sandbox empty before pushing changes -->
    <!-- material icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <!-- vue 3 -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.26"></script>

    <div id="app"></div>

    <script>
      const { createApp } = Vue;
      const Root = {
        data() {
          return {
            navItems: [
              {
                label: 'Home',
                url: '#',
                icon: 'home',
                isCurrent: true,
              },
              {
                label: 'Components',
                url: '#',
                icon: 'view_module',
                description: 'lorem ipsum dolor sit amet consectetur adipisicing elit',
                children: [
                  {
                    label: 'Sub menu 1',
                    url: '#submenu',
                    icon: 'text_fields',
                  },
                  {
                    label: 'Colors',
                    url: '#',
                    icon: 'color_lens',
                  },
                  {
                    label: 'Icons',
                    url: '#',
                    icon: 'image',
                  },
                  {
                    label: 'Buttons',
                    url: '#',
                    icon: 'touch_app',
                  },
                ],
              },
              {
                label: 'Styleguide',
                url: '#',
                icon: 'style',
                children: [
                  {
                    label: 'Typography',
                    url: '#',
                    icon: 'text_fields',
                    children: [
                      {
                        label: 'Headings',
                        url: '#',
                        icon: 'text_fields',
                        children: [
                          {
                            label: 'Heading 1',
                            url: '#',
                          },
                          {
                            label: 'Heading 2',
                            url: '#',
                          },
                        ],
                      },
                      {
                        label: 'Paragraphs',
                        url: '#',
                        icon: 'text_fields',
                      },
                      {
                        label: 'Lists',
                        url: '#',
                        icon: 'text_fields',
                      },
                      {
                        label: 'Code',
                        url: '#',
                        icon: 'text_fields',
                      },
                      {
                        label: 'Tables',
                        url: '#',
                        icon: 'text_fields',
                      },
                    ],
                  },
                  {
                    label: 'Colors',
                    url: '#',
                    icon: 'color_lens',
                    children: [
                      {
                        label: 'Primary',
                        url: '#',
                        icon: 'color_lens',
                      },
                    ],
                  },
                  {
                    label: 'Icons',
                    url: '#',
                    icon: 'image',
                  },
                  {
                    label: 'Buttons',
                    url: '#',
                    icon: 'touch_app',
                  },
                  {
                    label: 'Forms',
                    url: '#',
                    icon: 'text_fields',
                  },
                ],
              },
              {
                label: 'About',
                url: '#',
                icon: 'info',
              },
            ],
          };
        },
        methods: {
          onNav(e) {
            // traverse the navItems array, clear isCurrent property and set it to true for the clicked item
            const newCurrentItem = e.detail.item;
            console.log({ newCurrentItem });
            this.navItems = this.navItems.map((item) => this.traverseNavItems(item, newCurrentItem));
          },
          traverseNavItems(item, newCurrent) {
            let isCurrent = false;
            if (item === newCurrent) {
              console.log('item === newCurrent', item, newCurrent);
              isCurrent = true;
            }
            const children = item?.children?.map((child) => this.traverseNavItems(child, newCurrent));
            return {
              ...item,
              isCurrent,
              children,
            };
          },
        },
        mounted() {},
        template: `
  <p>Mega menu rendered from <code>items</code> JSON data</p>
  <go-main-nav :items.prop="navItems" @navigate="(e) => onNav(e)"></go-main-nav>
  `,
      };

      const app = createApp(Root);
      app.config.compilerOptions.isCustomElement = (tag) => tag.startsWith('go-');
      app.mount('#app');
    </script>
  </body>
</html>
